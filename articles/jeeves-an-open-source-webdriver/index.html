<!DOCTYPE html><html lang="en"><head><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1"><meta name="viewport" content="width=device-width"><title>Jeeves, an Open Source Webdriver - DocuSign Dev Blog</title><link rel="alternate" href="undefined/feed.xml" type="application/rss+xml" title="Brought to you by the development teams at DocuSign"><link rel="stylesheet" href="/assets/css/bootstrap.min.css"><link rel="stylesheet" href="/assets/css/syntax.css"><link href="//fonts.googleapis.com/css?family=Inconsolata:400,700&amp;subset=latin,latin-ext" rel="stylesheet" type="text/css"><link href="//fonts.googleapis.com/css?family=Lora:400,700,400italic,700italic" rel="stylesheet" type="text/css"><link rel="stylesheet" href="/assets/css/devblog.css"><link rel="icon" href="/favicon.ico"><link rel="shortcut icon" type="image/x-icon" href="/assets/img/favicon/docusigndev-favicon-32.png"><link rel="apple-touch-icon" sizes="114×114" href="/assets/img/favicon/docusigndev-favicon-114.png"><link rel="apple-touch-icon" sizes="72×72" href="/assets/img/favicon/docusigndev-favicon-72.png"><link rel="apple-touch-icon" href="/assets/img/favicon/docusigndev-favicon-57.png"><link rel="apple-touch-icon" sizes="512x512" href="/assets/img/favicon/docusigndev-favicon-512.png"></head><body class="article-detail"><div class="container"><header id="top-header" class="row"><div class="col-sm-12"><h1><a href="/">DocuSign Dev Blog</a></h1><h2>Brought to you by the development teams at DocuSign</h2></div></header><div class="row"><div id="left-col" class="col-sm-3 col-md-2"><nav><ul class="row"><li class="col-sm-12"><a href="/contributors/">Contributors</a></li><li class="col-sm-12"><a href="http://github.com/docusigndev">Code</a></li><li class="col-sm-12"><a href="https://twitter.com/docusigndev">Follow</a></li><li class="col-sm-12"><a href="http://www.docusign.com">DocuSign.com</a></li></ul></nav><section class="row about-author"><div class="col-sm-12"><a href="/contributors/cj-winslow/" class="author-name">C.J. Winslow</a></div><div class="col-xs-4 col-sm-12"><div class="author-pic"><a href="/contributors/cj-winslow/"><img alt="C.J. Winslow" src="https://avatars1.githubusercontent.com/u/1581943?s=460"></a></div></div><div class="col-xs-6 col-sm-12"><div class="author-blurb">Software Engineer</div><div class="author-twitter">Twitter:
&nbsp;<a href="http://twitter.com/Whoaa512">@Whoaa512</a></div><div class="author-github">Github:
&nbsp;<a href="http://github.com/Whoaa512">Whoaa512</a></div></div></section><section class="tags"><ul><li><a href="/topic/jeeves/">Jeeves</a></li><li><a href="/topic/open-source/">open-source</a></li><li><a href="/topic/webdriver/">webdriver</a></li><li><a href="/topic/browser-automation/">browser-automation</a></li></ul></section></div><main id="right-col" class="col-sm-8 col-sm-offset-1 col-md-9"><div class="article-meta"><div class="date">03 June 2014</div></div><h1>Jeeves, an Open Source Webdriver</h1><article><section class="content"><p>Our <a href="http://engineering.docusign.com/articles/the-new-docusign-experience-all-in-javascript/">previous post</a> covered
a high-level overview of the tech stack behind the <a href="https://www.docusign.com/new-experience">New DocuSign Experience</a>
(or as it’s still called internally, <em>Martini</em>). Today, we’re excited to announce the release of our open source webdriver,
<a href="https://github.com/DocuSignDev/Jeeves">Jeeves</a>, a tool that helps ease the pain of writing automated browser <span class="caps">UI</span> tests.
This tool is the cornerstone of our test framework and drives nearly all of our <span class="caps">UI</span> automation for the New DocuSign Experience.
This post explains the reasons why we built it, and how it differs from other currently available&nbsp;tools.</p>
<h2 id="why-did-we-build-jeeves-">Why did we build&nbsp;Jeeves?</h2>
<p>To fully understand why we built Jeeves, it will help to explain the problems we faced before it was built. With any
large-scale enterprise software product, automated testing is an absolute must. This is especially true if the goal is to
rapidly iterate based on feedback and release often. Initially our automated test suite used the official
<a href="https://www.npmjs.org/package/selenium-webdriver"><code>selenium-webdriver</code></a> module. We experienced flakiness with its promises implementation, and our thin abtraction layer over it was rife with explicit waits, inconsistent interfaces, and unexplained timeouts 
which translated to an unreliable test suite. This led to extremely low productivity for our <span class="caps">QA</span> engineers while they spent time
trying to discern if a failure was real or just the result of some unexpected timeout. Since there were only two <span class="caps">QA</span> engineers
on the Martini team at that time, all the time we wasted chasing down intermittent test failures due to problems with the
framework meant that we were struggling to keep up with our automation coverage&nbsp;goals.</p>
<p>Frustrated by the problems with the existing test framework architecture, I wanted to design something that would not only
solve our problems with test reliability, but also reduce complexity and make it easier for non-<span class="caps">QA</span> engineers to write and debug
tests. To improve our test reliability, we needed to start with a foundation that is maintained regularly and works across
different browsers. The obvious choice to fill this need was <a href="https://github.com/admc/wd"><code>wd</code></a>, which implements the
<a href="https://code.google.com/p/selenium/wiki/JsonWireProtocol">Selenium <span class="caps">JSON</span> Wire Protocol</a>
while still supporting <a href="http://phantomjs.org/">PhantomJS</a>.
We also needed a solution that would work with our existing tests (all written in the Node.js callback style), and we wanted
something that would simplify the introduction to our test framework for new team&nbsp;members.</p>
<h2 id="how-is-jeeves-different-">How is Jeeves&nbsp;different?</h2>
<p>With the amazing <code>wd</code> module at the core of Jeeves, the logical question you might ask is, “Why not just <code>wd</code> instead of
building a wrapper?” While this is a valid concern, <code>wd</code> alone did not strike at the heart of the secondary problem I was
trying to solve: to make writing <span class="caps">UI</span> tests quick <span class="amp">&amp;</span> easy. While <code>wd</code> is extremely flexible in terms of the browser <span class="amp">&amp;</span> element
interactions it provides, it still lacks some nice-to-have features which can somewhat deter or hinder the average feature
developer from effectively writing tests with it.
<span class="more"></span></p>
<p>Jeeves answers this by offering some helpful additions which&nbsp;include:</p>
<ul>
<li>Detailed logging on all method calls, and optionally displayed logging from <code>wd</code> itself.<ul>
<li>Extra logging allows for quicker debugging from the console output, even while the tests are still&nbsp;running!</li>
</ul>
</li>
<li>Simple abstraction for writing a named series of steps<ul>
<li><code>Jeeves.namedSteps</code> is a nifty wrapper around <a href="https://github.com/caolan/async#seriestasks-callback"><code>async.series</code></a>
with extra logging that can happen before/after each step in the&nbsp;series.</li>
<li><a href="https://github.com/DocuSignDev/Jeeves/blob/master/examples/saucelabs.coffee">An example of this&nbsp;feature</a></li>
</ul>
</li>
<li>Hassle-free screenshots! <code>Jeeves.takeScreenshot</code> handles saving the raw image buffer to a configurable directory.<ul>
<li>Saving screenshots from image buffers is not hard, but it shouldn’t clutter your test&nbsp;code</li>
</ul>
</li>
<li>Jeeves also implements two methods for element drag <span class="amp">&amp;</span> drop even though this feature is not directly supported
by <code>wd</code> or Selenium <span class="caps">JSON</span> Wire&nbsp;Protocol</li>
<li>Jeeves provides two ways for interacting with elements.<ul>
<li>You can use the traditional method of finding the element first, and then calling a separate method to interact with it.<ul>
<li>E.g.:<pre><code class="lang-coffeescript">it <span class="string">'should click the div'</span>, <span class="function"><span class="params">(done)</span> -&gt;</span>
  Jeeves.getElementByCss <span class="string">'div.clickable'</span>, <span class="function"><span class="params">(err, elem)</span> -&gt;</span>
    Jeeves.clickElement elem, <span class="function"><span class="params">(err)</span> -&gt;</span>
      done err</code></pre>
</li>
</ul>
</li>
<li>Or you can append one of the convenience suffixes to make the method do the element finding for you.<ul>
<li>Such as:<ul>
<li>ByClassName</li>
<li>ByCssSelector</li>
<li>ById</li>
<li>ByName</li>
<li>ByLinkText</li>
<li>ByPartialLinkText</li>
<li>ByTagName</li>
<li>ByXPath</li>
<li>ByCss</li>
</ul>
</li>
<li>E.g.:<pre><code class="lang-coffeescript">it <span class="string">'should click the div'</span>, <span class="function"><span class="params">(done)</span> -&gt;</span>
  Jeeves.clickElementByCss <span class="string">'div.clickable'</span>, <span class="function"><span class="params">(err)</span> -&gt;</span>
    done err</code></pre>
</li>
</ul>
</li>
</ul>
</li>
<li><span class="caps">UI</span> tests are not synchronous, so we need to wait for elements, <span class="caps">URL</span> changes, and the occasional attribute.<ul>
<li>Jeeves extends <code>wd</code>‘s <code>waitFor</code> pattern to wait for more than just elements:<ul>
<li><code>Jeeves.waitForUrlToChange</code></li>
<li><code>Jeeves.waitForVisibleElementBy...</code></li>
<li><code>Jeeves.waitForElementToHideBy...</code></li>
<li><code>Jeeves.waitForAttributeBy...</code></li>
<li><code>Jeeves.waitForAnyTextBy...</code></li>
<li><code>Jeeves.waitForSpecificTextBy...</code></li>
<li><code>Jeeves.waitForAndGetTextBy...</code></li>
<li><code>Jeeves.waitForAndClickElementBy...</code></li>
</ul>
</li>
</ul>
</li>
</ul>
<p>These enhancements which Jeeves adds on top of the reliable <code>wd</code> core have proven to be powerful tools for maintaining a
large suite of automated browser <span class="caps">UI</span> tests. Check out our <a href="https://github.com/DocuSignDev/Jeeves/tree/master/examples">examples</a>
to see how you can get&nbsp;started.</p>
<div class="share-box"><div id="fb-button" data-href="http://engineering.docusign.com/articles/jeeves-an-open-source-webdriver/" data-type="button_count" style="width:auto !important;" class="fb-share-button"></div><div id="fb-root"><script>(function(d, s, id) {
var js, fjs = d.getElementsByTagName(s)[0];
if (d.getElementById(id)) return;
js = d.createElement(s); js.id = id;
js.src = "//connect.facebook.net/en_US/all.js#xfbml=1&appId=221822221222506";
fjs.parentNode.insertBefore(js, fjs);
}(document, 'script', 'facebook-jssdk'));
</script></div><a id="twtr-button" href="https://twitter.com/share" data-url="http://engineering.docusign.com/articles/jeeves-an-open-source-webdriver/" data-via="docusigndev" class="twitter-share-button">Tweet<script>!function(d,s,id){var js,fjs=d.getElementsByTagName(s)[0],p=/^http:/.test(d.location)?'http':'https';if(!d.getElementById(id)){js=d.createElement(s);js.id=id;js.src=p+'://platform.twitter.com/widgets.js';fjs.parentNode.insertBefore(js,fjs);}}(document, 'script', 'twitter-wjs');
</script></a></div></section></article><section class="article-links"><ul class="pager"><li><a href="/articles/the-new-docusign-experience-all-in-javascript/">The new DocuSign experience, all in Javascript &raquo;</a></li></ul></section><section class="article-comments"><div id="disqus_thread"></div>
<script type="text/javascript">
    var disqus_shortname = 'docusigndev';
    (function() {
        var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
        dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
        (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
    })();
</script>
<noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
<a href="http://disqus.com" class="dsq-brlink">comments powered by <span class="logo-disqus">Disqus</span></a>
</section></main></div><footer class="row"></footer></div><script>var _gaq = _gaq || [];
_gaq.push(['_setAccount', 'UA-38381866-1']);
_gaq.push(['_trackPageview']);
(function() {
  var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
  ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
  var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
})();</script></body></html>